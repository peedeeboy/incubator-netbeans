# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.

#Values and Units module
@math-fn=<calc-fn> | <min-fn> | <max-fn> | <clamp-fn> | <attr-fn>

@calc-fn=calc ( <calc-sum> )

@calc-sum=<calc-product> [ [ "+" | "-" ] <calc-product> ]*
@calc-product=<calc-value> [ [ "*" | "/" ] <calc-value> ]*
@calc-value=[<minus_operator>? !number] | [<minus_operator>? !percentage] | [<minus_operator>? !length] | <var-fn> | [( <calc-sum2> )]
#@calc-value=[<minus_operator>? !number] | [<minus_operator>? !percentage] | [<minus_operator>? !length] | <var-fn>

#@calc-sum-repeat=<match-anything>
#@calc-product-repeat=repeat ( <calc-value-repeat> [ [ "*" | "/" ] <calc-value-repeat> ]*)
#@calc-value-repeat=[<minus_operator>? !number] | [<minus_operator>? !percentage] | [<minus_operator>? !length] | <var-fn> | [( <calc-sum-repeat> )]

@calc-sum2=<calc-product2> [ [ "+" | "-" ] <calc-product2> ]*
@calc-product2=<calc-value2> [ [ "*" | "/" ] <calc-value2> ]*
@calc-value2=[<minus_operator>? !number] | [<minus_operator>? !percentage] | [<minus_operator>? !length] | <var-fn> | | [( <calc-sum3> )] 

@calc-sum3=<calc-product3> [ [ "+" | "-" ] <calc-product3> ]*
@calc-product3=<calc-value3> [ [ "*" | "/" ] <calc-value3> ]*
@calc-value3=[<minus_operator>? !number] | [<minus_operator>? !percentage] | [<minus_operator>? !length] | <var-fn> 

@min-fn=min ( [<calc-sum> [, <calc-sum>]+] )

@max-fn=max ( [<calc-sum> [, <calc-sum>]+] )

@clamp-fn=clamp ( [<calc-sum> [, <calc-sum>]{2,2}] )

@attr-fn=attr ( !anything <type-or-unit>? [ , <attr-fallback> ]?)

@attr-name=!anything

@type-or-unit=string | url | integer | number | '%' | em | ex | cap | ch | ic | rem | lh | rlh | vw | vh | vi | vb | vmin | vmax | cm | mm | Q | in | pt | pc | px | deg | grad | rad | turn | s | ms | Hz | kHz | dpi | dpcm | dppx | color | image | length | angle | time | frequency

@attr-fallback=!anything

@toggle-fn=toggle ( [!function-content]+ )